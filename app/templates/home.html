<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #1a3a5f;
            --dark-blue: #0a1f33;
            --accent-blue: #2c5282;
            --light-blue: #4a90e2;
            --sidebar-width: 280px;
            --sidebar-collapsed: 80px;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #333;
            overflow-x: hidden;
        }
        
        /* Sidebar Styles */
        #sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, var(--dark-blue) 0%, var(--primary-blue) 100%);
            color: white;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            transition: all 0.3s;
            box-shadow: 3px 0 10px rgba(0, 0, 0, 0.2);
        }
        
        #sidebar.collapsed {
            width: var(--sidebar-collapsed);
        }
        
        .sidebar-header {
            padding: 1.5rem 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }
        
        .sidebar-header h3 {
            margin: 0;
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .sidebar-header .logo {
            height: 40px;
            margin-bottom: 0.5rem;
        }
        
        #sidebar.collapsed .sidebar-header h3,
        #sidebar.collapsed .sidebar-header p {
            display: none;
        }
        
        .sidebar-menu {
            padding: 1rem 0;
        }
        
        .menu-item {
            padding: 0.85rem 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .menu-item:hover, .menu-item.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-left: 4px solid var(--light-blue);
        }
        
        .menu-item i {
            margin-right: 1rem;
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }
        
        #sidebar.collapsed .menu-item span {
            display: none;
        }
        
        #sidebar.collapsed .menu-item i {
            margin-right: 0;
        }
        
        /* Submenu Styles */
        .submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .submenu.open {
            max-height: 300px;
        }
        
        .submenu-item {
            padding: 0.7rem 1.5rem 0.7rem 3rem;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            font-size: 0.9rem;
            border-left: 4px solid transparent;
        }
        
        .submenu-item:hover, .submenu-item.active {
            background: rgba(255, 255, 255, 0.05);
            color: white;
            border-left: 4px solid var(--light-blue);
        }
        
        .submenu-item i {
            margin-right: 0.75rem;
            font-size: 1rem;
            width: 20px;
            text-align: center;
        }
        
        .menu-item.has-submenu {
            position: relative;
        }
        
        .menu-item.has-submenu::after {
            content: '\f078';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            right: 1.5rem;
            transition: transform 0.3s;
        }
        
        .menu-item.has-submenu.open::after {
            transform: rotate(180deg);
        }
        
        #sidebar.collapsed .submenu {
            display: none;
        }
        
        #sidebar.collapsed .menu-item.has-submenu::after {
            display: none;
        }
        
        /* Main Content Styles */
        #content {
            margin-left: var(--sidebar-width);
            transition: all 0.3s;
            min-height: 100vh;
        }
        
        #content.expanded {
            margin-left: var(--sidebar-collapsed);
        }
        
        .top-navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .toggle-sidebar {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--primary-blue);
            cursor: pointer;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--light-blue), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .main-content {
            padding: 2rem;
        }
        
        /* Dashboard Cards */
        .welcome-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .welcome-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .welcome-header h1 {
            color: var(--primary-blue);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .welcome-header p {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 0;
        }
        
        .user-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--light-blue), var(--accent-blue));
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            margin-top: 0.5rem;
            box-shadow: 0 4px 10px rgba(42, 128, 255, 0.3);
        }
        
        .system-intro {
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .system-intro h2 {
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .system-intro p {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .action-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .action-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: inline-block;
            padding: 1rem;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
        }
        
        .action-card h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark-blue);
        }
        
        .action-card p {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            flex-grow: 1;
        }
        
        .btn-action {
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s;
            border: none;
        }
        
        .btn-manage-samples {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }
        
        .btn-manage-users {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
        }
        
        .btn-training {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
        }
        
        .btn-test-results {
            background: linear-gradient(135deg, #343a40, #23272b);
            color: white;
        }
        
        .btn-feedback {
            background: linear-gradient(135deg, #6c757d, #545b62);
            color: white;
        }
        
        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-blue);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Expanded Options Styles */
        .expanded-options {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .expanded-options.show {
            display: block;
        }
        
        .option-btn {
            display: block;
            width: 100%;
            margin-bottom: 0.5rem;
            padding: 0.75rem;
            text-align: left;
            border: none;
            border-radius: 6px;
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .option-btn:hover {
            background: rgba(40, 167, 69, 0.2);
            transform: translateX(5px);
        }
        
        .option-btn i {
            margin-right: 0.5rem;
            width: 20px;
        }
        
        .toggle-options {
            margin-top: 1rem;
            background: none;
            border: none;
            color: #28a745;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        
        .toggle-options i {
            margin-left: 0.25rem;
            transition: transform 0.3s;
        }
        
        .toggle-options.rotated i {
            transform: rotate(180deg);
        }
        
        @media (max-width: 768px) {
            #sidebar {
                width: var(--sidebar-collapsed);
            }
            
            #sidebar.collapsed {
                width: 0;
            }
            
            #content {
                margin-left: var(--sidebar-collapsed);
            }
            
            #content.expanded {
                margin-left: 0;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-bar {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div id="sidebar">
        <div class="sidebar-header">
            <img src="/static/images/facial-recognition.png" alt="Logo" class="logo">
            <h3>Admin System</h3>
            <p class="mb-0">Management Portal</p>
        </div>
        
        <div class="sidebar-menu">
            <a href="#" class="menu-item active">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            
            <!-- Manage Samples with Submenu -->
            <div class="menu-item has-submenu" id="samplesMenu">
                <i class="fas fa-vial"></i>
                <span>Manage Samples</span>
            </div>
            <div class="submenu" id="samplesSubmenu">
                <a href="/identity-verification" class="submenu-item">
                    <i class="fas fa-fingerprint"></i>
                    <span>Identity Verification</span>
                </a>
                <a href="/manage_samples" class="submenu-item">
                    <i class="fas fa-user-check"></i>
                    <span>Detect Fake/Real</span>
                </a>
            </div>
            
            <a href="/manage_user" class="menu-item">
                <i class="fas fa-users"></i>
                <span>Manage Users</span>
            </a>
            <div class="menu-item has-submenu" id="trainMenu">
                <i class="fas fa-brain"></i>
                <span>Training</span>
            </div>
            <div class="submenu" id="trainSubmenu">
                <a href="/identity-verification" class="submenu-item">
                    <i class="fas fa-fingerprint"></i>
                    <span>Train Identity Verification</span>
                </a>
                <a href="/train" class="submenu-item">
                    <i class="fas fa-user-check"></i>
                    <span>Train Detect Fake/Real</span>
                </a>
            </div>
            <a href="/manage-test-results" class="menu-item">
                <i class="fas fa-chart-bar"></i>
                <span>Test Results</span>
            </a>
            <a href="/view_feedback" class="menu-item">
                <i class="fas fa-comments"></i>
                <span>Feedback</span>
            </a>
            <a href="/training-config" class="menu-item">
                <i class="fas fa-cogs"></i>
                <span>System Settings</span>
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>
    
    <!-- Main Content -->
    <div id="content">
        <!-- Top Navbar -->
        <div class="top-navbar">
            <button class="toggle-sidebar" id="toggleSidebar">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="user-info">
                <div class="user-avatar">
                    {{ username|first|upper }}
                </div>
                <div>
                    <strong>{{ username }}</strong>
                    <div class="text-muted" style="font-size: 0.85rem;">Administrator</div>
                </div>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Welcome Card -->
            <div class="welcome-card">
                <div class="welcome-header">
                    <h1>Deepfake Detection Dashboard <i class="fas fa-tachometer-alt"></i></h1>
                    <p>Welcome back to your control center</p>
                    <div class="user-badge">
                        <i class="fas fa-user-circle me-2"></i> {{ username }}
                    </div>
                </div>
                
                <!-- System Introduction -->
                <div class="system-intro">
                    <h2>About Our System</h2>
                    <p>This administration dashboard provides comprehensive control over all aspects of the testing and analysis system. From here, you can manage users, samples, training processes, and review test results with advanced analytics.</p>
                    <p>The system is designed to provide accurate and efficient testing with state-of-the-art AI algorithms that continuously improve through machine learning.</p>
                    <div class="d-flex gap-2 flex-wrap">
                        <span class="badge bg-light text-dark p-2">AI-Powered Analysis</span>
                        <span class="badge bg-light text-dark p-2">Real-time Monitoring</span>
                        <span class="badge bg-light text-dark p-2">Secure Data Management</span>
                        <span class="badge bg-light text-dark p-2">Advanced Reporting</span>
                    </div>
                </div>
                
                <!-- Action Grid -->
                <div class="action-grid">
                    <!-- Manage Samples -->
                    <div class="action-card">
                        <div>
                            <div class="action-icon" style="background: rgba(40, 167, 69, 0.1); color: #28a745;">
                                <i class="fas fa-vial"></i>
                            </div>
                            <h3>Manage Samples</h3>
                            <p>Add, edit, or remove testing samples from the database</p>
                            
                            <!-- Expanded Options -->
                            <div class="expanded-options" id="sampleOptions">
                                <button class="option-btn" onclick="location.href='/identity-verification'">
                                    <i class="fas fa-fingerprint"></i> Add Sample for Identity Verification
                                </button>
                                <button class="option-btn" onclick="location.href='/add-fake-real-sample'">
                                    <i class="fas fa-user-check"></i> Add Sample to Detect Fake or Real
                                </button>
                            </div>
                        </div>
                        <button class="btn btn-action btn-manage-samples" id="toggleSampleOptions">
                            <i class="fas fa-cog me-2"></i> Manage Samples
                        </button>
                        <button class="toggle-options" id="toggleOptionsBtn">
                            More Options <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                    
                    <!-- Manage Users -->
                    <div class="action-card">
                        <div>
                            <div class="action-icon" style="background: rgba(23, 162, 184, 0.1); color: #17a2b8;">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3>Manage Users</h3>
                            <p>View, edit permissions, or remove users from the system</p>
                        </div>
                        <a href="/manage_user" class="btn btn-action btn-manage-users">
                            <i class="fas fa-user-cog me-2"></i> Manage Users
                        </a>
                    </div>
                    
                    <!-- Training -->
                    <div class="action-card">
                        <div>
                            <div class="action-icon" style="background: rgba(255, 193, 7, 0.1); color: #ffc107;">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h3>Training</h3>
                            <p>Train and optimize your AI models with new data</p>
                        </div>
                        <a href="#" class="btn btn-action btn-training">
                            <i class="fas fa-play-circle me-2"></i> Start Training
                        </a>
                    </div>
                    
                    <!-- Test Results -->
                    <div class="action-card">
                        <div>
                            <div class="action-icon" style="background: rgba(52, 58, 64, 0.1); color: #343a40;">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3>Test Results</h3>
                            <p>View and analyze test results and performance metrics</p>
                        </div>
                        <a href="#" class="btn btn-action btn-test-results">
                            <i class="fas fa-chart-line me-2"></i> View Results
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Toggle sidebar
        document.getElementById('toggleSidebar').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            const content = document.getElementById('content');
            
            sidebar.classList.toggle('collapsed');
            content.classList.toggle('expanded');
            
            // Change icon
            const icon = this.querySelector('i');
            if (sidebar.classList.contains('collapsed')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-indent');
            } else {
                icon.classList.remove('fa-indent');
                icon.classList.add('fa-bars');
            }
        });
        
        // Set active menu item
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.menu-item').forEach(i => {
                    i.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
        
        // Toggle sample options in dashboard
        document.getElementById('toggleOptionsBtn').addEventListener('click', function() {
            const options = document.getElementById('sampleOptions');
            options.classList.toggle('show');
            this.classList.toggle('rotated');
        });
        
        // Main manage samples button also toggles options on mobile
        document.getElementById('toggleSampleOptions').addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                const options = document.getElementById('sampleOptions');
                const toggleBtn = document.getElementById('toggleOptionsBtn');
                options.classList.toggle('show');
                toggleBtn.classList.toggle('rotated');
            } else {
                // On desktop, redirect to main manage samples page
                window.location.href = '/manage_samples';
            }
        });
        
        // Toggle sidebar submenu for Manage Samples
        document.getElementById('samplesMenu').addEventListener('click', function() {
            if (!document.getElementById('sidebar').classList.contains('collapsed')) {
                this.classList.toggle('open');
                document.getElementById('samplesSubmenu').classList.toggle('open');
            }
        });
         // Toggle sidebar submenu for Manage Samples
        document.getElementById('trainMenu').addEventListener('click', function() {
            if (!document.getElementById('sidebar').classList.contains('collapsed')) {
                this.classList.toggle('open');
                document.getElementById('trainSubmenu').classList.toggle('open');
            }
        });
        
        // Set active submenu item
        document.querySelectorAll('.submenu-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.submenu-item').forEach(i => {
                    i.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>